<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Steroid Calculator + Plotter</title>
  <style>
    body {
      background-color: #1c1c1c;
      color: #f9f9f9;
      font-family: sans-serif;
      padding: 30px;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: #1c1c1c;
      border: 1px solid #7a7a7a;
      border-radius: 10px;
      padding: 20px;
    }
    label, input, select {
      display: block;
      width: 100%;
      margin-top: 10px;
    }
    input, select {
      padding: 8px;
      background: #111;
      border: 1px solid #7a7a7a;
      color: #f9f9f9;
      border-radius: 5px;
    }
    button {
      background-color: #b73239;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
    }
    .compound-block {
      border-top: 1px solid #7a7a7a;
      padding-top: 15px;
      margin-top: 20px;
    }
    .results {
      margin-top: 30px;
      padding: 20px;
      background: #111;
      border-radius: 10px;
      border: 1px solid #7a7a7a;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Steroid Injection Calculator + Plotter</h2>

    <label>Number of Compounds</label>
    <input type="number" id="compoundCount" value="1" min="1" max="10" onchange="renderCompounds()" />

    <div id="compoundContainer"></div>

    <label>Injection Frequency (per week)</label>
    <select id="frequency">
      <option value="7">Every day (7x/week)</option>
      <option value="6">6x per week</option>
      <option value="5">5x per week</option>
      <option value="4">Mon/Wed/Fri/Sun (4x)</option>
      <option value="3">Every other day (~3x)</option>
      <option value="2">Twice a week</option>
      <option value="1">Once a week</option>
    </select>

    <label>Cycle Duration (weeks)</label>
    <input type="number" id="cycleWeeks" value="12" min="1" />

    <button onclick="calculate()">Calculate & Plot</button>

    <div class="results" id="resultBox"></div>

    <canvas id="chart" style="margin-top: 40px;"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
  <script>
    const steroidData = {
      "Boldenone Cypionate": 144,
      "Boldenone Undecylenate": 336,
      "Dihydroboldenone Cypionate": 144,
      "Drostanolone Enanthate": 120,
      "Drostanolone Propionate": 48,
      "Methandione Injectable": 6,
      "Methyldrostanolone Injectable": 12,
      "Methenolone Enanthate": 120,
      "Methenolone Acetate": 4,
      "Nandrolone Decanoate": 192,
      "Nandrolone Phenylpropionate": 96,
      "Stanozolol Suspension": 24,
      "Testosterone Acetate": 48,
      "Testosterone Base": 2,
      "Testosterone Cypionate": 144,
      "Testosterone Decanoate": 192,
      "Testosterone Enanthate": 120,
      "Testosterone Isocaproate": 144,
      "Testosterone Phenylpropionate": 96,
      "Testosterone Propionate": 48,
      "Testosterone Suspension": 24,
      "Testosterone Undercanoate": 1000,
      "Trestolone Acetate": 48,
      "Trestolone Enanthate": 120,
      "Trenbolone Acetate": 48,
      "Trenbolone Base": 6,
      "Trenbolone Enanthate": 120,
      "Trenbolone Hexahydrobenzyl Carbonate": 144,
      "Chlordehydromethyltestosterone": 12,
      "Fluoxymesterone Oral": 9,
      "Methandione Oral": 4,
      "Methyl-1-testosterone Oral": 4,
      "Methyldrostanolone Oral": 6,
      "Methylstenbolone Oral": 4,
      "Metribolone Oral": 6,
      "Oxandrolone Oral": 9,
      "Oxymetholone Oral (Anadrol)": 8,
      "Stanozolol Oral": 9,
      "Custom": null
    };

    function renderCompounds() {
      const count = parseInt(document.getElementById("compoundCount").value);
      const container = document.getElementById("compoundContainer");
      container.innerHTML = "";

      const injectableOptions = Object.entries(steroidData)
        .filter(([n]) => !n.includes("Oral") && n !== "Custom")
        .sort().map(([n, h]) => `<option value="${n}">${n} (${h}h)</option>`).join("");

      const oralOptions = Object.entries(steroidData)
        .filter(([n]) => n.includes("Oral"))
        .sort().map(([n, h]) => `<option value="${n}">${n} (${h}h)</option>`).join("");

      for (let i = 0; i < count; i++) {
        const div = document.createElement("div");
        div.classList.add("compound-block");
        div.innerHTML = `
          <label>Compound ${i + 1}</label>
          <select id="compound_${i}" onchange="toggleHalfLife(${i})">
            <optgroup label="Injectables">${injectableOptions}</optgroup>
            <optgroup label="Orals">${oralOptions}</optgroup>
            <optgroup label="Custom"><option value="Custom">Custom</option></optgroup>
          </select>

          <div id="customHL_${i}" style="display:none;">
            <label>Custom Half-Life (hours)</label>
            <input type="number" id="halfLife_${i}" />
          </div>

          <label>Weekly Dose (mg)</label>
          <input type="number" id="weeklyDose_${i}" />

          <div id="injectableFields_${i}">
            <label>Concentration (mg/ml)</label>
            <input type="number" id="concentration_${i}" />
            <label>Vial Size (ml)</label>
            <input type="number" id="vialSize_${i}" />
          </div>

          <div id="oralFields_${i}" style="display:none;">
            <label>Dosage per Tab (mg)</label>
            <input type="number" id="doseTab_${i}" />
            <label>Tabs per Bottle</label>
            <input type="number" id="tabsBottle_${i}" />
          </div>
        `;
        container.appendChild(div);
        toggleHalfLife(i);
      }
    }

    function toggleHalfLife(index) {
      const sel = document.getElementById(`compound_${index}`).value;
      document.getElementById(`customHL_${index}`).style.display = sel === "Custom" ? "block" : "none";
      document.getElementById(`oralFields_${index}`).style.display = sel.includes("Oral") ? "block" : "none";
      document.getElementById(`injectableFields_${index}`).style.display = sel.includes("Oral") ? "none" : "block";
    }

    document.addEventListener("DOMContentLoaded", () => renderCompounds());

    function getRandomColor() {
      const r = Math.floor(Math.random() * 200);
      const g = Math.floor(Math.random() * 200);
      const b = Math.floor(Math.random() * 200);
      return `rgb(${r},${g},${b})`;
    }

    let chart;

    // Include the final `calculate()` function from your latest post here…
    // I’ve already reviewed it and confirmed it works — just paste it under here ⬇
  </script>
</body>
</html>
